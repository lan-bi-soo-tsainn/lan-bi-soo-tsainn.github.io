<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>理髮廳</title>
    <link rel="stylesheet" href="css/detail.css">
    <script async src="https://unpkg.com/es-module-shims/dist/es-module-shims.js"></script>

    <script type="importmap">
	{
		"imports": {
			"three": "https://unpkg.com/three/build/three.module.js"
		}
	}
</script>
</head>

<body>
    <div class="music-block">
        <div class="arrow-btn">
            <img src="/assets/arrow-btn.png" />
        </div>
        <img class="detail-street-img" src="/assets/barber/detail_barber.png" />
        <div class="angle"></div>
        <audio id="music" controls src="/assets/barber/barber.mp3"></audio>
    </div>
    <article>
        <section class="video-block">
            <img class="video-block-background" src="/assets/background.png"
                srcset="/assets/background.png 500w, /assets/background.png 1000w, /assets/background.png 1500w" />
            <div class="video-block-intro">
                <div class="video-block-intro-content">
                    <h1>理髮廳</h1>
                    <p>AN UNWAVERING <br>BASTION IN THE <br>RELENTLESS <br>FLOW OF TIME</p>
                </div>
                <div class="video-block-intro-3d" style="left:27%;top:-60%;">
                </div>
            </div>
            <div class="video-block-video-block">
                <video autoplay muted loop playsinline id="indexVideo">
                    <source src="assets/barber/barber_intro.mp4"
                        type="video/mp4">
                </video>
            </div>
        </section>
        <section class="article-block">
            <div class="article-block-word">
                <p>這裡是心靈的慰藉所，<br>是情感的交匯處。</p>
                <p>剪一寸頭，便彷彿得到了生命旅途中的一處靜謐港灣。<br>每一次的剪裁，如同在時光的拾音中找回遺失的和諧。</p>
                <p>理髮廳不僅是外在形象的雕琢地，更是情感深處的映照。<br>理髮椅上和阿姨們日常般的傾談，<br>毫無印象的內容卻擁有植入記憶深處的對話。</p>
                <p>在這樣的據點中，歲月不再是匆匆而過，<br>而是變得深沉且流淌人情的溫度。</p>
            </div>
            <div class="article-block-word en" style="line-height: 2;">
                <p>This haven soothes the soul,<br>
                    Where emotions gracefully collide.</p>
                    
                <p>With each inch of hair shed,<br>
                    A serene harbor on life's voyage is found.<br>
                    Every snip echoes a melody,<br>
                    Reclaiming lost harmony within time.</p>
                    
                <p>The barbershop transcends mere grooming,<br>
                    A mirror reflecting emotions' depths.<br>
                    Conversations with the dear aunties,<br>
                    On the throne of shears,<br>
                    Seemingly mundane yet etched,<br>
                    Deep within memory's recesses.</p>
                    
                <p>In this sanctuary,<br>
                   Time relinquishes its haste,<br>
                   Flowing with the profound warmth,<br>
                   Of heartfelt connections</p>
            </div>
        </section>
        <div class="top-btn" data-action="gotop">
            <img src="/assets/btn.png"/>
        </div>
    </article>

</body>
<script type="module" src="/js/3d_barber.js"></script>
<script>
    var video = document.getElementById("indexVideo");
    function myFunction() {
        if (video.paused) {
            video.play();
        }
    }

    let requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;

    document.addEventListener('DOMContentLoaded', function () {
        const goTopButton = document.querySelector('[data-action="gotop"]');
        const windowViewPortHeight = window.innerHeight; // browser viewport height
        let isRequestingAnimationFrame = false;

        if (!goTopButton) {
            return;
        }

        goTopButton.addEventListener('click', function () {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });
    });

    document.addEventListener('DOMContentLoaded', function () {
        var aduioButton = document.querySelector('.arrow-btn');
        var music = document.getElementById("music");
        aduioButton.addEventListener('click', function () {
            if (aduioButton.style.transform == 'rotate(90deg)'){
                aduioButton.style.transform = 'rotate(0deg)';
                music.style.visibility = 'hidden';
                music.pause();
            } else {
                aduioButton.style.transform = 'rotate(90deg)';
                music.style.visibility = 'visible';
                
            }
            
          
        });
    });

    var startX = 0; //触摸开始时的位置
    var endX = 0; //触摸结束时的位置
    var startTime = 0; //触摸开始的时间
    var endTime = 0; //触摸结束的时间

    //获取触摸开始时的位置和时间
    video.addEventListener('touchstart', function (event) {
        startX = event.touches[0].pageX;
        startTime = new Date().getTime();
    }, false);

    //获取触摸过程中的实时位置
    video.addEventListener('touchmove', function (event) {
        endX = event.touches[0].pageX;
    }, false);

    //当触摸结束时，判断是否进行切换操作
    video.addEventListener('touchend', function (event) {
        var distance = endX - startX; //触摸移动的距离
        endTime = new Date().getTime(); //获取触摸结束的时间
        var duration = endTime - startTime; //触摸持续的时间
        var speed = Math.abs(distance) / duration; //触摸的速度

        if (distance > 0 && speed > 0.2) { //向右滑动的条件
            //执行向右滑动的操作
            window.location.href = "/market.html";
        } else if (distance < 0 && speed > 0.2) { //向左滑动的条件
            //执行向左滑动的操作
            window.location.href = "/breakfast.html";
        }
    }, false);
</script>

</html>